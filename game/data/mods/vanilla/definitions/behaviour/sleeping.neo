
///////////////////////////////////////////////////////////////////////////// Effects

Effect: effSleep {
    name = "Sleeping";

    attributes {
        attSleeping, 1;
    }

    Script: removeCondition(carrier) {
        require(getLightLevel(carrier) > carrier.attLightSensitivity && carrier.attFatigue < carrier.attFatigueSensitivity);
    }
}

///////////////////////////////////////////////////////////////////////////// Drives

Drive: driSleep {
	Script: condition {
	    require(! .attSleeping);
		require(.attFatigue > .attFatigueSensitivity || getLightLevel(self) <= .attLightSensitivity);
	}

	solutions {
		proSleep;
	}

	Script: getWeight() {
	    return(max(.attFatigue - .attFatigueSensitivity, 0));
	}
}

///////////////////////////////////////////////////////////////////////////// Processes

Process: proSleep {
	Script: process {
        //deleteEffects(self, effHunger);
	    //addOccupation(self, .attSleepTime, proSleep->awake);
	    addEffect(self, effSleep);
	}

	Script: awake {
	    ..attSleeping = 0;
	}
}
